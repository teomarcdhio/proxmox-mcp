services:
  homelab-mcp:
    build: .
    container_name: homelab-mcp
    restart: unless-stopped
    ports:
      - "8080:8080"
    environment:
      # Proxmox connection
      - PROXMOX_HOST=${PROXMOX_HOST:-192.168.1.100}
      - PROXMOX_PORT=${PROXMOX_PORT:-8006}
      - PROXMOX_VERIFY_SSL=${PROXMOX_VERIFY_SSL:-false}
      
      # API Token authentication (recommended)
      - PROXMOX_API_TOKEN_ID=${PROXMOX_API_TOKEN_ID}
      - PROXMOX_API_TOKEN_SECRET=${PROXMOX_API_TOKEN_SECRET}
      
      # Server settings
      - MCP_SERVER_HOST=0.0.0.0
      - MCP_SERVER_PORT=8080
    healthcheck:
      test: ["CMD", "curl", "-f", "http://localhost:8080/health"]
      interval: 30s
      timeout: 10s
      retries: 3
      start_period: 10s
    # Optional: Run on the same network as your homelab
    # networks:
    #   - homelab

# Optional: Define network if needed
# networks:
#   homelab:
#     external: true
